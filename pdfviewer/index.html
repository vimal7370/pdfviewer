<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FileAgo - PDF Reader</title>
    <link rel="stylesheet" href="./assets/fas.css" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="app-container">
      <header class="app-header" id="menubar-panel">
        <div class="left-controls">
          <button
            class="action-button"
            onclick="toggle_outline_panel()"
            title="Toggle Outline"
          >
            <i class="fas fa-list"></i>
          </button>
          <div class="app-logo">
            <svg
              width="120"
              height="32"
              viewBox="0 0 188 42"
              fill="none"
              class="app-logo-dark"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M70.7666 11.5411C69.5998 11.5411 68.6075 11.1809 67.7886 10.4591C66.994 9.71279 66.5973 8.80454 66.5973 7.73532C66.5973 6.66608 67.0196 5.76943 67.863 5.04885C68.7064 4.32826 69.6742 3.9668 70.7666 3.9668C71.9077 3.9668 72.8884 4.33992 73.7074 5.08615C74.5508 5.8324 74.973 6.71505 74.973 7.73532C74.973 8.82902 74.5508 9.73735 73.7074 10.4591C72.8639 11.1809 71.8834 11.5411 70.7666 11.5411ZM73.4468 33.3312C71.3622 33.3312 69.7371 32.6597 68.5703 31.3153C67.4047 29.9732 66.8207 28.1449 66.8207 25.8316V18.965H59.9713V33.0327H52.1167V18.9662H49.7715V14.3395H52.1167V12.7724C52.1167 10.0113 52.774 7.9219 54.0897 6.50401C55.4297 5.08616 57.291 4.37723 59.6734 4.37723C61.5847 4.37723 63.3587 4.86229 64.9967 5.8324L64.736 10.8695C63.2971 10.297 62.0931 10.0113 61.1252 10.0113C60.3807 10.0113 59.8096 10.1979 59.4128 10.571C59.0162 10.9196 58.8173 11.4291 58.8173 12.1008C58.8173 12.7479 59.0278 13.4942 59.4501 14.3395H74.7125V25.4957C74.7125 26.0682 74.8613 26.5148 75.1591 26.8378C75.4814 27.1363 75.8908 27.2867 76.3876 27.2867C76.8831 27.2867 77.3926 27.1363 77.9138 26.8378L78.3233 32.0242C77.7777 32.4463 77.0576 32.7704 76.1643 32.9943C75.2953 33.2193 74.3902 33.3312 73.4468 33.3312Z"
                fill="white"
              />
              <path
                d="M87.0264 33.3308C84.9172 33.3308 83.2793 32.672 82.1126 31.3544C80.9708 30.0112 80.4004 28.1817 80.4004 25.8684V8.44375L88.2544 7.28711V25.3088C88.2544 26.0048 88.4166 26.5144 88.7386 26.8385C89.0855 27.1371 89.6818 27.2875 90.525 27.2875C91.1454 27.2875 91.7538 27.1371 92.3493 26.8385L92.6091 32.0622C90.9461 32.9088 89.0855 33.3308 87.0264 33.3308Z"
                fill="white"
              />
              <path
                d="M104.186 33.3311C102.125 33.3311 100.288 32.9206 98.6756 32.0998C97.0877 31.2533 95.8467 30.1094 94.9535 28.6671C94.0587 27.1991 93.6133 25.5445 93.6133 23.7046C93.6133 21.8145 94.074 20.1344 94.9914 18.6675C95.9096 17.2007 97.1498 16.0685 98.7135 15.2721C100.276 14.4758 102.014 14.0781 103.925 14.0781C105.761 14.0781 107.324 14.4886 108.614 15.3095C109.93 16.1058 110.912 17.2007 111.555 18.5929C112.2 19.9606 112.522 21.502 112.522 23.2196C112.522 23.6673 112.498 23.9903 112.45 24.1896L101.282 25.6448C101.579 26.5147 102.064 27.1501 102.733 27.5478C103.402 27.9208 104.283 28.1062 105.375 28.1062C107.062 28.1062 108.887 27.6713 110.846 26.8015L111.778 31.8001C109.47 32.8204 106.939 33.3311 104.186 33.3311ZM106.752 20.9435C106.355 19.3764 105.413 18.5929 103.923 18.5929C103.03 18.5929 102.323 18.9287 101.801 19.6003C101.282 20.2719 101.007 21.1417 100.984 22.2109L106.752 20.9435Z"
                fill="white"
              />
              <path
                d="M123.455 33.3311C121.841 33.3311 120.329 32.909 118.913 32.0624C117.525 31.1926 116.408 30.0232 115.565 28.5551C114.718 27.0627 114.299 25.4081 114.299 23.5927C114.299 21.8017 114.718 20.1844 115.565 18.7421C116.408 17.2742 117.536 16.1303 118.952 15.3095C120.366 14.4886 121.867 14.0781 123.455 14.0781C124.745 14.0781 125.936 14.4384 127.029 15.1602C128.145 15.8819 128.99 16.964 129.56 18.4063V14.0781H137.378V33.0326H129.56V29.5614C128.319 32.0753 126.284 33.3311 123.455 33.3311ZM125.875 27.4358C126.868 27.4358 127.711 27.0871 128.406 26.3911C129.126 25.6693 129.51 24.8228 129.56 23.8527V23.5542C129.51 22.5584 129.113 21.7131 128.37 21.0158C127.65 20.3197 126.818 19.9711 125.875 19.9711C124.832 19.9711 123.939 20.3442 123.195 21.0904C122.475 21.8122 122.114 22.6821 122.114 23.7023C122.114 24.747 122.486 25.6297 123.232 26.3503C123.976 27.0755 124.857 27.4358 125.875 27.4358Z"
                fill="white"
              />
              <path
                d="M151.681 41.5782C150.316 41.5782 149.014 41.4418 147.773 41.1677L148.37 35.6456C149.337 35.7948 150.231 35.8683 151.049 35.8683C152.589 35.8683 153.755 35.4077 154.549 34.4878C155.343 33.5923 155.815 32.0753 155.963 29.9357C154.499 32.0007 152.265 33.0326 149.263 33.0326C147.625 33.0326 146.111 32.6093 144.721 31.764C143.357 30.9175 142.266 29.7736 141.446 28.3313C140.651 26.8889 140.256 25.309 140.256 23.5939C140.256 21.8518 140.652 20.2603 141.446 18.8179C142.242 17.3499 143.32 16.1932 144.686 15.3468C146.074 14.5002 147.589 14.0781 149.226 14.0781C150.74 14.0781 152.056 14.4758 153.171 15.2721C154.313 16.0428 155.057 17.0876 155.405 18.4063V14.0781H163.26V28.2928C163.26 32.6466 162.267 35.9429 160.281 38.1805C158.32 40.446 155.452 41.5782 151.681 41.5782ZM151.681 27.437C152.674 27.437 153.53 27.0884 154.249 26.3922C154.969 25.6704 155.352 24.824 155.402 23.8539V23.5553C155.352 22.6098 154.957 21.7772 154.213 21.0555C153.493 20.3337 152.649 19.9723 151.681 19.9723C150.664 19.9723 149.795 20.3454 149.076 21.0916C148.355 21.8134 147.996 22.6832 147.996 23.7035C147.996 24.7237 148.355 25.6063 149.076 26.3514C149.795 27.0766 150.664 27.437 151.681 27.437Z"
                fill="white"
              />
              <path
                d="M176.82 33.3311C174.737 33.3311 172.875 32.9206 171.237 32.0998C169.623 31.2789 168.358 30.1468 167.44 28.7044C166.546 27.2364 166.1 25.5586 166.1 23.6673C166.1 21.7772 166.56 20.111 167.479 18.6675C168.396 17.2007 169.662 16.0685 171.276 15.2721C172.914 14.4758 174.774 14.0781 176.859 14.0781C178.968 14.0781 180.83 14.4886 182.443 15.3095C184.081 16.1058 185.347 17.2251 186.24 18.6675C187.135 20.111 187.58 21.7772 187.58 23.6673C187.58 25.5842 187.121 27.2749 186.203 28.7429C185.309 30.1841 184.045 31.3162 182.406 32.1383C180.793 32.9323 178.93 33.3311 176.82 33.3311ZM176.895 27.7343C177.913 27.7343 178.744 27.3612 179.39 26.615C180.059 25.8442 180.394 24.8613 180.394 23.6673C180.394 22.4733 180.059 21.5032 179.39 20.7581C178.744 19.9862 177.913 19.6014 176.895 19.6014C175.877 19.6014 175.034 19.9862 174.364 20.7581C173.718 21.5032 173.396 22.4733 173.396 23.6673C173.396 24.8613 173.718 25.8442 174.364 26.615C175.034 27.3612 175.877 27.7343 176.895 27.7343Z"
                fill="white"
              />
              <path
                d="M4.40979 2H30.5998C33.5202 2 35.8884 4.37356 35.8884 7.30048V30.6226C35.8884 33.5506 33.5202 35.9231 30.5998 35.9231H7.33014C4.40979 35.9231 2.04156 33.5506 2.04156 30.6226V7.30048C2.04156 4.37356 1.48944 2 4.40979 2Z"
                stroke="#FE4F4F"
                stroke-width="4"
              />
              <path
                d="M31.2549 7.25H6.67578V12.2982H31.2549V7.25Z"
                fill="#FE4F4F"
              />
              <path
                d="M20.0241 16.5391H6.67578V21.5873H20.0241V16.5391Z"
                fill="#FE4F4F"
              />
              <path
                d="M13.1701 25.8281H6.67578V30.8764H13.1701V25.8281Z"
                fill="#FE4F4F"
              />
            </svg>

            <svg
              width="120"
              height="32"
              viewBox="0 0 188 42"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="app-logo-light"
            >
              <path
                d="M70.7666 11.5411C69.5998 11.5411 68.6075 11.1809 67.7886 10.4591C66.994 9.71279 66.5973 8.80454 66.5973 7.73532C66.5973 6.66608 67.0196 5.76943 67.863 5.04885C68.7064 4.32826 69.6742 3.9668 70.7666 3.9668C71.9077 3.9668 72.8884 4.33992 73.7074 5.08615C74.5508 5.8324 74.973 6.71505 74.973 7.73532C74.973 8.82902 74.5508 9.73735 73.7074 10.4591C72.8639 11.1809 71.8834 11.5411 70.7666 11.5411ZM73.4468 33.3312C71.3622 33.3312 69.7371 32.6597 68.5703 31.3153C67.4047 29.9732 66.8207 28.1449 66.8207 25.8316V18.965H59.9713V33.0327H52.1167V18.9662H49.7715V14.3395H52.1167V12.7724C52.1167 10.0113 52.774 7.9219 54.0897 6.50401C55.4297 5.08616 57.291 4.37723 59.6734 4.37723C61.5847 4.37723 63.3587 4.86229 64.9967 5.8324L64.736 10.8695C63.2971 10.297 62.0931 10.0113 61.1252 10.0113C60.3807 10.0113 59.8096 10.1979 59.4128 10.571C59.0162 10.9196 58.8173 11.4291 58.8173 12.1008C58.8173 12.7479 59.0278 13.4942 59.4501 14.3395H74.7125V25.4957C74.7125 26.0682 74.8613 26.5148 75.1591 26.8378C75.4814 27.1363 75.8908 27.2867 76.3876 27.2867C76.8831 27.2867 77.3926 27.1363 77.9138 26.8378L78.3233 32.0242C77.7777 32.4463 77.0576 32.7704 76.1643 32.9943C75.2953 33.2193 74.3902 33.3312 73.4468 33.3312Z"
                style="fill: rgb(74, 74, 74)"
              ></path>
              <path
                d="M87.0264 33.3308C84.9172 33.3308 83.2793 32.672 82.1126 31.3544C80.9708 30.0112 80.4004 28.1817 80.4004 25.8684V8.44375L88.2544 7.28711V25.3088C88.2544 26.0048 88.4166 26.5144 88.7386 26.8385C89.0855 27.1371 89.6818 27.2875 90.525 27.2875C91.1454 27.2875 91.7538 27.1371 92.3493 26.8385L92.6091 32.0622C90.9461 32.9088 89.0855 33.3308 87.0264 33.3308Z"
                style="fill: rgb(74, 74, 74)"
              ></path>
              <path
                d="M104.186 33.3311C102.125 33.3311 100.288 32.9206 98.6756 32.0998C97.0877 31.2533 95.8467 30.1094 94.9535 28.6671C94.0587 27.1991 93.6133 25.5445 93.6133 23.7046C93.6133 21.8145 94.074 20.1344 94.9914 18.6675C95.9096 17.2007 97.1498 16.0685 98.7135 15.2721C100.276 14.4758 102.014 14.0781 103.925 14.0781C105.761 14.0781 107.324 14.4886 108.614 15.3095C109.93 16.1058 110.912 17.2007 111.555 18.5929C112.2 19.9606 112.522 21.502 112.522 23.2196C112.522 23.6673 112.498 23.9903 112.45 24.1896L101.282 25.6448C101.579 26.5147 102.064 27.1501 102.733 27.5478C103.402 27.9208 104.283 28.1062 105.375 28.1062C107.062 28.1062 108.887 27.6713 110.846 26.8015L111.778 31.8001C109.47 32.8204 106.939 33.3311 104.186 33.3311ZM106.752 20.9435C106.355 19.3764 105.413 18.5929 103.923 18.5929C103.03 18.5929 102.323 18.9287 101.801 19.6003C101.282 20.2719 101.007 21.1417 100.984 22.2109L106.752 20.9435Z"
                style="fill: rgb(74, 74, 74)"
              ></path>
              <path
                d="M123.455 33.3311C121.841 33.3311 120.329 32.909 118.913 32.0624C117.525 31.1926 116.408 30.0232 115.565 28.5551C114.718 27.0627 114.299 25.4081 114.299 23.5927C114.299 21.8017 114.718 20.1844 115.565 18.7421C116.408 17.2742 117.536 16.1303 118.952 15.3095C120.366 14.4886 121.867 14.0781 123.455 14.0781C124.745 14.0781 125.936 14.4384 127.029 15.1602C128.145 15.8819 128.99 16.964 129.56 18.4063V14.0781H137.378V33.0326H129.56V29.5614C128.319 32.0753 126.284 33.3311 123.455 33.3311ZM125.875 27.4358C126.868 27.4358 127.711 27.0871 128.406 26.3911C129.126 25.6693 129.51 24.8228 129.56 23.8527V23.5542C129.51 22.5584 129.113 21.7131 128.37 21.0158C127.65 20.3197 126.818 19.9711 125.875 19.9711C124.832 19.9711 123.939 20.3442 123.195 21.0904C122.475 21.8122 122.114 22.6821 122.114 23.7023C122.114 24.747 122.486 25.6297 123.232 26.3503C123.976 27.0755 124.857 27.4358 125.875 27.4358Z"
                style="fill: rgb(74, 74, 74)"
              ></path>
              <path
                d="M151.681 41.5782C150.316 41.5782 149.014 41.4418 147.773 41.1677L148.37 35.6456C149.337 35.7948 150.231 35.8683 151.049 35.8683C152.589 35.8683 153.755 35.4077 154.549 34.4878C155.343 33.5923 155.815 32.0753 155.963 29.9357C154.499 32.0007 152.265 33.0326 149.263 33.0326C147.625 33.0326 146.111 32.6093 144.721 31.764C143.357 30.9175 142.266 29.7736 141.446 28.3313C140.651 26.8889 140.256 25.309 140.256 23.5939C140.256 21.8518 140.652 20.2603 141.446 18.8179C142.242 17.3499 143.32 16.1932 144.686 15.3468C146.074 14.5002 147.589 14.0781 149.226 14.0781C150.74 14.0781 152.056 14.4758 153.171 15.2721C154.313 16.0428 155.057 17.0876 155.405 18.4063V14.0781H163.26V28.2928C163.26 32.6466 162.267 35.9429 160.281 38.1805C158.32 40.446 155.452 41.5782 151.681 41.5782ZM151.681 27.437C152.674 27.437 153.53 27.0884 154.249 26.3922C154.969 25.6704 155.352 24.824 155.402 23.8539V23.5553C155.352 22.6098 154.957 21.7772 154.213 21.0555C153.493 20.3337 152.649 19.9723 151.681 19.9723C150.664 19.9723 149.795 20.3454 149.076 21.0916C148.355 21.8134 147.996 22.6832 147.996 23.7035C147.996 24.7237 148.355 25.6063 149.076 26.3514C149.795 27.0766 150.664 27.437 151.681 27.437Z"
                style="fill: rgb(74, 74, 74)"
              ></path>
              <path
                d="M176.82 33.3311C174.737 33.3311 172.875 32.9206 171.237 32.0998C169.623 31.2789 168.358 30.1468 167.44 28.7044C166.546 27.2364 166.1 25.5586 166.1 23.6673C166.1 21.7772 166.56 20.111 167.479 18.6675C168.396 17.2007 169.662 16.0685 171.276 15.2721C172.914 14.4758 174.774 14.0781 176.859 14.0781C178.968 14.0781 180.83 14.4886 182.443 15.3095C184.081 16.1058 185.347 17.2251 186.24 18.6675C187.135 20.111 187.58 21.7772 187.58 23.6673C187.58 25.5842 187.121 27.2749 186.203 28.7429C185.309 30.1841 184.045 31.3162 182.406 32.1383C180.793 32.9323 178.93 33.3311 176.82 33.3311ZM176.895 27.7343C177.913 27.7343 178.744 27.3612 179.39 26.615C180.059 25.8442 180.394 24.8613 180.394 23.6673C180.394 22.4733 180.059 21.5032 179.39 20.7581C178.744 19.9862 177.913 19.6014 176.895 19.6014C175.877 19.6014 175.034 19.9862 174.364 20.7581C173.718 21.5032 173.396 22.4733 173.396 23.6673C173.396 24.8613 173.718 25.8442 174.364 26.615C175.034 27.3612 175.877 27.7343 176.895 27.7343Z"
                style="fill: rgb(74, 74, 74)"
              ></path>
              <path
                d="M4.40979 2H30.5998C33.5202 2 35.8884 4.37356 35.8884 7.30048V30.6226C35.8884 33.5506 33.5202 35.9231 30.5998 35.9231H7.33014C4.40979 35.9231 2.04156 33.5506 2.04156 30.6226V7.30048C2.04156 4.37356 1.48944 2 4.40979 2Z"
                stroke="#FE4F4F"
                stroke-width="4"
              ></path>
              <path
                d="M31.2549 7.25H6.67578V12.2982H31.2549V7.25Z"
                fill="#FE4F4F"
              ></path>
              <path
                d="M20.0241 16.5391H6.67578V21.5873H20.0241V16.5391Z"
                fill="#FE4F4F"
              ></path>
              <path
                d="M13.1701 25.8281H6.67578V30.8764H13.1701V25.8281Z"
                fill="#FE4F4F"
              ></path>
            </svg>
          </div>
        </div>

        <div class="app-toolbar">
          <div class="app-toolbar-group">
            <button
              class="action-button"
              onclick="handlePrint()"
              title="Print Document"
              id="print-button"
              style="display: none"
            >
              <i class="fas fa-print"></i>
            </button>
            <button
              class="action-button"
              onclick="show_search_panel()"
              title="Search"
            >
              <i class="fas fa-search"></i>
            </button>
            <button
              class="action-button"
              onclick="rotate_pages(-90)"
              title="Rotate Left"
            >
              <i class="fas fa-undo"></i>
            </button>
            <button
              class="action-button"
              onclick="rotate_pages(90)"
              title="Rotate Right"
            >
              <i class="fas fa-redo"></i>
            </button>
            <div class="app-menu">
              <button class="dropdown-toggle" id="view-menu-toggle">
                <div class="zoom-control toggle">
                  <span class="zoom-value" id="zoom-level">100%</span>
                  <i class="fa-solid fa-angle-down"></i>
                </div>
              </button>
              <div class="dropdown-menu" id="view-menu">
                <div class="dropdown-item" onclick="zoom_to(48)">
                  <i class="fas fa-search-minus"></i>
                  50%
                </div>
                <div class="dropdown-item" onclick="zoom_to(72)">
                  <i class="fas fa-search"></i>
                  75% (72 dpi)
                </div>
                <div class="dropdown-item" onclick="zoom_to(96)">
                  <i class="fas fa-search"></i>
                  100% (96 dpi)
                </div>
                <div class="dropdown-item" onclick="zoom_to(120)">
                  <i class="fas fa-search-plus"></i>
                  125%
                </div>
                <div class="dropdown-item" onclick="zoom_to(144)">
                  <i class="fas fa-search-plus"></i>
                  150%
                </div>
                <div class="dropdown-item" onclick="zoom_to(192)">
                  <i class="fas fa-search-plus"></i>
                  200%
                </div>
              </div>
            </div>

            <div class="zoom-control">
              <button class="zoom-button" onclick="zoom_out()" title="Zoom Out">
                <i class="fas fa-minus"></i>
              </button>
              <button class="zoom-button" onclick="zoom_in()" title="Zoom In">
                <i class="fas fa-plus"></i>
              </button>
            </div>

            <button
              class="action-button"
              onclick="toggle_fullscreen()"
              title="Toggle Fullscreen"
            >
              <i class="fa-solid fa-expand"></i>
            </button>

            <button
              class="action-button"
              onclick="cycleTheme()"
              title="Toggle Theme"
              id="theme-toggle-button"
            >
              <i class="fas fa-desktop" id="theme-toggle-icon"></i>
            </button>
          </div>
        </div>
      </header>

      <div class="app-content">
        <aside class="app-sidebar hidden" id="outline-panel">
          <div class="sidebar-header">
            <span>Document Outline</span>
            <button class="sidebar-close" onclick="toggle_outline_panel()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="outline-container">
            <ul class="outline-list" id="outline">
              <!-- outline inserted here -->
            </ul>
          </div>
        </aside>

        <main class="document-container" id="page-panel">
          <div id="message">
            <i class="fas fa-file-pdf"></i>
            Loading Viewer...
          </div>
          <div id="pages">
            <!-- pages inserted here -->
          </div>
        </main>
      </div>

      <footer class="search-panel" id="search-panel" style="display: none">
        <input
          id="search-input"
          class="search-input"
          type="search"
          placeholder="Search in document..."
          autocomplete="off"
          size="40"
        />
        <button class="search-button" onclick="run_search(-1, 1)">
          <i class="fas fa-arrow-up"></i>
          <span>Previous</span>
        </button>
        <button class="search-button" onclick="run_search(1, 1)">
          <i class="fas fa-arrow-down"></i>
          <span>Next</span>
        </button>
        <div class="search-status" id="search-status"></div>
        <button class="search-close" onclick="hide_search_panel()">
          <i class="fas fa-times"></i>
        </button>
      </footer>
    </div>

    <!-- Hidden input for file dialog -->
    <input
      style="display: none"
      id="open-file-input"
      type="file"
      accept=".pdf,application/pdf"
      onchange="open_document_from_file(event.target.files[0])"
    />

    <script>
      // Toggle dropdown menus
      document.querySelectorAll(".dropdown-toggle").forEach((toggle) => {
        toggle.addEventListener("click", function (e) {
          e.stopPropagation();
          const menu = this.nextElementSibling;
          document.querySelectorAll(".dropdown-menu").forEach((m) => {
            if (m !== menu) m.classList.remove("show");
          });
          menu.classList.toggle("show");
        });
      });

      // Close dropdowns when clicking outside
      document.addEventListener("click", function () {
        document.querySelectorAll(".dropdown-menu").forEach((menu) => {
          menu.classList.remove("show");
        });
      });

      // Initialize with proper zoom level
      document.addEventListener("DOMContentLoaded", function () {
        // Set initial zoom level display to 100%
        document.getElementById("zoom-level").textContent = "100%";
      });
    </script>
    <script src="main.js"></script>
  </body>
</html>
